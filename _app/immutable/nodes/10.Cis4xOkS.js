import{h as w,a as r,t as u}from"../chunks/disclose-version.DainzrCA.js";import{p as k,a as L,$ as x,c as l,s as y,r as c}from"../chunks/runtime.CkuHu-5U.js";import{e as C}from"../chunks/events.kTWISSZW.js";import{i as j}from"../chunks/lifecycle.BWv99mR0.js";import{i as g,u as d}from"../chunks/user.RFszd4WE.js";import{g as I}from"../chunks/entry.ozTBmkr2.js";import{o as S}from"../chunks/index-client.D2ap0THN.js";const $=!0,D=Object.freeze(Object.defineProperty({__proto__:null,prerender:$},Symbol.toStringTag,{value:"Module"}));var O=u('<meta name="login" content="login">'),z=u('<div class="p-8 flex flex-col items-center justify-center"><div class="w-80 text-center"><img src="/logo-placeholder.png" alt="Login" class="mt-16 mb-4 mx-auto"> <div class="text-2xl font-bold">Login to your account</div> <button class="mt-16" id="g_id_signin">Login with Google</button></div></div>');function G(m,p){k(p,!1);const i=e=>{var a;const o=`; ${document.cookie}`.split(`; ${e}=`);if(o.length===2)return(a=o==null?void 0:o.pop())==null?void 0:a.split(";").shift()},f=()=>{const e=i("username");i("isLoggedIn")&&e?(g.set(!0),d.set(decodeURIComponent(e))):_()};S(()=>{f(),window.google.accounts.id.initialize({client_id:void 0,callback:h}),window.google.accounts.id.renderButton(document.getElementById("g_id_signin"),{theme:"outline",size:"large",text:"continue_with"})});const h=e=>{const t=e.credential;fetch("/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})}).then(o=>o.json()).then(o=>{user=o,console.log("User logged in:",user)}).catch(o=>console.error("Error logging in:",o))};function v(e){e.preventDefault();const t=window.location.origin+"/api/auth/google";I(t,{replaceState:!0})}function _(e){d.set(""),g.set(!1)}j();var n=z();w(e=>{var t=O();x.title="Login",r(e,t)});var s=l(n),b=y(l(s),4);c(s),c(n),C("click",b,v),r(m,n),L()}export{G as component,D as universal};
